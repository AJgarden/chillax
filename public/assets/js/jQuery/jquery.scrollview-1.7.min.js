/*!
 * scrollview.js alpha v1.7
 * @copyright 2021 AJgarden
 * ##### Author: Jia #####
 * ##### Update: 2021/11/05 #####
 */
$.fn.scrollView=function(t){var n=$(this);if("destroy"===t)n.removeAttr("data-scroll-view");else{n.attr("data-scroll-view","init");var e=$.extend({},{start:"default",end:null,endKey:"bottom",threshold:-200,addClass:"scroll-view",repeat:!1,onInit:function(t){return!1},onChange:function(t){return!1},onChangeAtStart:function(t){return!1},onChangeAtEnd:function(t){return!1},onAddClass:function(t){return!1},onAddClassAtStart:function(t){return!1},onAddClassAtEnd:function(t){return!1},onRemoveClass:function(t){return!1},onRemoveClassAtStart:function(t){return!1},onRemoveClassAtEnd:function(t){return!1}},t);n.each(function(t,n){var o=$(n);e.onInit.call(this,o)});var o=n.map(()=>$(window).scrollTop());$(window).on("scroll",function(){var t=$(window).scrollTop();n.each(function(s,a){if("init"===n.attr("data-scroll-view")){var l=$(a);if(!1===l.hasClass(e.addClass)){if("default"===e.start)var i=l.offset().top-$(window).height();else if("string"==typeof e.start)i=$(e.start).offset().top-$(window).height();else i=e.start;if(!0===e.repeat)if(null!==e.end){if("string"==typeof e.end)if("top"===e.endKey)var d=$(e.end).offset().top-$(window).height();else if("number"==typeof e.endKey)d=$(e.end).offset().top+$(e.end).outerHeight()*e.endKey-$(window).height();else d=$(e.end).offset().top+$(e.end).outerHeight()-$(window).height();else d=e.end;t+e.threshold>=i&&o[s]<i?(l.addClass(e.addClass),"function"==typeof e.onAddClassAtStart&&e.onAddClassAtStart.call(this,l),"function"==typeof e.onAddClass&&e.onAddClass.call(this,l),"function"==typeof e.onChangeAtStart&&e.onChangeAtStart.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l)):t+e.threshold<=d&&o[s]>d&&(l.addClass(e.addClass),"function"==typeof e.onAddClassAtEnd&&e.onAddClassAtEnd.call(this,l),"function"==typeof e.onAddClass&&e.onAddClass.call(this,l),"function"==typeof e.onChangeAtEnd&&e.onChangeAtEnd.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l))}else t+e.threshold>=i&&o[s]<i&&(l.addClass(e.addClass),"function"==typeof e.onAddClassAtStart&&e.onAddClassAtStart.call(this,l),"function"==typeof e.onAddClass&&e.onAddClass.call(this,l),"function"==typeof e.onChangeAtStart&&e.onChangeAtStart.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l));else t+e.threshold>=i&&(l.addClass(e.addClass),"function"==typeof e.onAddClassAtStart&&e.onAddClassAtStart.call(this,l),"function"==typeof e.onAddClass&&e.onAddClass.call(this,l),"function"==typeof e.onChangeAtStart&&e.onChangeAtStart.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l))}else if(!0===e.repeat){if("default"===e.start)i=l.offset().top-$(window).height();else if("string"==typeof e.start)i=$(e.start).offset().top-$(window).height();else i=e.start;if(null!==e.end){if("string"==typeof e.end)if("top"==e.endKey)d=$(e.end).offset().top-$(window).height();else if("number"==typeof e.endKey)d=$(e.end).offset().top+$(e.end).outerHeight()*e.endKey-$(window).height();else d=$(e.end).offset().top+$(e.end).outerHeight()-$(window).height();else d=e.end;t+e.threshold<i&&o[s]>=i?(l.removeClass(e.addClass),"function"==typeof e.onRemoveClassAtStart&&e.onRemoveClassAtStart.call(this,l),"function"==typeof e.onRemoveClass&&e.onRemoveClass.call(this,l),"function"==typeof e.onChangeAtStart&&e.onChangeAtStart.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l)):t+e.threshold>d&&o[s]<=d&&(l.removeClass(e.addClass),"function"==typeof e.onRemoveClassAtEnd&&e.onRemoveClassAtEnd.call(this,l),"function"==typeof e.onRemoveClass&&e.onRemoveClass.call(this,l),"function"==typeof e.onChangeAtEnd&&e.onChangeAtEnd.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l))}else t+e.threshold>d&&o[s]<=d&&(l.removeClass(e.addClass),"function"==typeof e.onRemoveClassAtEnd&&e.onRemoveClassAtEnd.call(this,l),"function"==typeof e.onRemoveClass&&e.onRemoveClass.call(this,l),"function"==typeof e.onChangeAtEnd&&e.onChangeAtEnd.call(this,l),"function"==typeof e.onChange&&e.onChange.call(this,l))}o[s]=t}})}).trigger("scroll"),$(window).on("resize",function(){$(this).trigger("scroll")})}};